<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <div>
        <h2>Register</h2>

        <label>First Name</label>
        <input id="NameInput" type="text" placeholder="Enter your name" />

        <label>Last Name</label>
        <input id="SurnameInput" type="text" placeholder="Enter your surname" />

        <label>Date of Birth</label>
        <input id="dobInput" type="date" />

        <label>Gender</label>
        <select id="genderInput">
            <option value="true">Male</option>
            <option value="false">Female</option>
        </select>

        <label>Email</label>
        <input id="emailInput" type="email" placeholder="Enter your email" />

        <label>Username</label>
        <input id="usernameInput" type="text" placeholder="Enter your username" />

        <label>Password</label>
        <input id="passwordInput" type="password" placeholder="Enter password" />

        <label>Latitude</label>
        <input id="latitudeInput" type="number" step="0.000001" placeholder="Enter latitude" />

        <label>Longitude</label>
        <input id="longitudeInput" type="number" step="0.000001" placeholder="Enter longitude" />

        <label>Preferred Radius (km)</label>
        <input id="radiusInput" type="number" step="0.1" placeholder="Enter preferred radius in km" />

        <label>Preferred Categories (comma separated)</label>
        <input id="categoriesInput" type="text" placeholder="e.g. Sports, Music" />

        <label>
            <input id="termsInput" type="checkbox" /> Accept Terms & Conditions
        </label>

        <button onclick="registerUser()">Register</button>
    </div>

    <script>
        async function registerUser() {
            const name = document.getElementById('NameInput').value;
            const surname = document.getElementById('SurnameInput').value;
            const dob = document.getElementById('dobInput').value;
            const isMale = document.getElementById('genderInput').value === 'true';
            const email = document.getElementById('emailInput').value;
            const username = document.getElementById('usernameInput').value;
            const password = document.getElementById('passwordInput').value;
            const latitude = parseFloat(document.getElementById('latitudeInput').value) || 0;
            const longitude = parseFloat(document.getElementById('longitudeInput').value) || 0;
            const radius = parseFloat(document.getElementById('radiusInput').value) || 0;
            const categories = document.getElementById('categoriesInput').value;
            const acceptedTerms = document.getElementById('termsInput').checked;

            if (!name || !surname || !dob || !email || !username || !password || !acceptedTerms) {
                alert("Please fill all required fields and accept terms.");
                return;
            }

            const newUser = {
                Name: name,
                Surname: surname,
                DateOfBirth: dob,
                IsMale: isMale,
                Email: email,
                UserName: username,
                Password: password,
                Latitude: latitude,
                Longitude: longitude,
                PrefferedRadiusKm: radius,
                PrefferedCategories: categories,
                AcceptedTermsAndConditions: acceptedTerms
            };

            try {
                const response = await fetch('https://localhost:7099/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(newUser)
                });

                if (!response.ok) {
                    const error = await response.text();
                    alert("Registration failed: " + error);
                    return;
                }

                const result = await response.text();
                alert("Registration successful: " + result);
            } catch (error) {
                alert("Failed to register: " + error);
            }
        }
    </script>
</body>
</html>
